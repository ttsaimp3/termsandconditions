<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Terms and Conditions</title>
<style>
  body {
    margin:0; font-family:'Trebuchet MS', sans-serif;
    background-color:#62001c;
    color:white; overflow:auto; position:relative;
    background-image:
      repeating-linear-gradient(10deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 1px, transparent 1px, transparent 4px),
      repeating-linear-gradient(20deg, rgba(0,0,0,0.025) 0px, rgba(0,0,0,0.025) 1px, transparent 1px, transparent 5px),
      repeating-linear-gradient(-10deg, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 1px, transparent 1px, transparent 3px),
      repeating-linear-gradient(4deg, rgba(0,0,0,0.15) 0px, rgba(0,0,0,0.015) 1px, transparent 1px, transparent 4px),
      repeating-linear-gradient(-2deg, rgba(255,255,255,0.015) 0px, rgba(255,255,255,0.015) 1px, transparent 1px, transparent 4px),
      repeating-linear-gradient(79deg, rgba(255,255,255,0.01) 0px, rgba(255,255,255,0.01) 1px, transparent 1px, transparent 5px);
    background-size: 5px 5px;
    min-height: 100vh;
  }
    
  canvas { position:fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none; }

  /* main content */
  .main-content { 
    position:fixed; 
    top:51%; 
    left:38%; 
    transform:translate(-50%, -50%); 
    width:70vw; 
    height:70vh; 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    z-index:1; 
    text-align:center; 
    transition: opacity 0.8s ease;
  }
  
  .main-content.hidden {
    opacity: 0;
    pointer-events: none;
  }
  
  .main-content img { 
    opacity: 20;
    width: 400px;
    border-radius:8px; 
    transition: opacity 2s ease-in; 
  }
  
  .overlay-text { 
    position:absolute; 
    top:18%; 
    left:27%; 
    transform:translate(0%, 0%); 
    width:50vw; 
    color:white; 
    font-size:1.2rem; 
    line-height:1.4; 
    pointer-events:auto; 
    text-align: right;
    opacity: 20;
    transition: opacity 2s ease-in;
  }
  
  .overlay-text mark { 
    background:black; 
    color:white; 
    padding:0; 
    border-radius:0; 
  }
  
  .overlay-text a { 
    color:rgb(0, 157, 18); 
    text-decoration:underline; 
    cursor:pointer; 
  }
  
  .overlay-text a:hover {
    color:rgb(0, 200, 23);
  }

  /* data preferences container */
  #dataPreferencesContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    flex-direction: column;
    z-index: 5;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
    background: rgba(10, 10, 10, 0.97);
    backdrop-filter: blur(10px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  
  #dataPreferencesContainer.active {
    display: flex;
    animation: fadeIn 0.8s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  /* comparison container */
  .comparison-container {
    display: flex;
    gap: 30px;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
  }
  
  .comparison-column {
    flex: 1;
    background: rgba(30, 30, 30, 0.7);
    border-radius: 15px;
    padding: 25px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .column-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .column-header h2 {
    font-size: 1.8rem;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .column-icon {
    font-size: 2rem;
  }
  
  .column-description {
    color: #ccc;
    margin-bottom: 25px;
    line-height: 1.5;
    padding: 15px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    border-left: 3px solid currentColor;
  }
  
  .gov-column .column-description {
    border-left-color: #ff0055;
  }
  
  .business-column .column-description {
    border-left-color: rgb(0, 157, 18);
  }
  
  /* data items grid */
  .data-items-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
    margin-bottom: 30px;
    max-height: 400px;
    overflow-y: auto;
    padding: 10px;
  }
  
  .data-item {
    background: rgba(40, 40, 40, 0.8);
    border-radius: 8px;
    padding: 15px;
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .data-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }
  
  .data-item.selected {
    border-color: currentColor;
  }
  
  .gov-column .data-item.selected {
    background: rgba(0, 102, 204, 0.1);
    color: #a8003a;
  }
  
  .business-column .data-item.selected {
    background: rgba(0, 204, 102, 0.1);
    color: rgb(0, 157, 18);
  }
  
  .data-item-toggle {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.3);
    margin-right: 15px;
    flex-shrink: 0;
    position: relative;
    background: rgba(255, 255, 255, 0.05);
  }
  
  .data-item.selected .data-item-toggle {
    background: currentColor;
    border-color: currentColor;
  }
  
  .data-item.selected .data-item-toggle::after {
    content: '‚úì';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #000;
    font-weight: bold;
    font-size: 1rem;
  }
  
  .data-item-content {
    flex: 1;
  }
  
  .data-item-content h3 {
    margin: 0 0 5px 0;
    color: #fff;
    font-size: 1rem;
  }
  
  .data-item-content p {
    margin: 0;
    color: #aaa;
    font-size: 0.85rem;
    line-height: 1.4;
  }
  
  /* quick select buttons */
  .quick-select {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  
  .quick-btn {
    padding: 8px 15px;
    background: rgba(98, 0, 28, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #ccc;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
  }
  
  .quick-btn:hover {
    background: rgba(98, 0, 28, 0.5);
    color: #fff;
  }
  
  /* action buttons */
  .action-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px solid rgba(255, 255, 255, 0.1);
  }
  
  .action-btn {
    padding: 15px 30px;
    background: linear-gradient(to right, #62001c, #8b0030);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .action-btn:hover {
    background: linear-gradient(to right, #8b0030, #a8003a);
    transform: translateY(-2px);
  }
  
  #calculateBtn {
    background: linear-gradient(to right, #006400, #008000);
  }
  
  #calculateBtn:hover {
    background: linear-gradient(to right, #008000, #00a000);
  }
  
  /* results */
  #resultsContent {
    display: block;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
  }
  
  .results-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px;
    background: rgba(30, 30, 30, 0.7);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .results-header h2 {
    font-size: 2.2rem;
    color: #fff;
    margin-bottom: 15px;
    background: linear-gradient(to right, #ff0055, #ff0055);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  
  .results-header p {
    color: #ccc;
    font-size: 1.1rem;
    max-width: 800px;
    margin: 0 auto;
    line-height: 1.5;
  }
  
  /* alignment Meter */
  .alignment-meter-container {
    margin: 30px 0 40px 0;
    background: rgba(30, 30, 30, 0.7);
    border-radius: 15px;
    padding: 25px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .alignment-meter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }
  
  .alignment-meter-header h3 {
    font-size: 1.5rem;
    color: #fff;
    margin: 0;
  }
  
  .alignment-meter-value {
    font-size: 2.5rem;
    font-weight: bold;
    background: #fff;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
  
  .alignment-meter {
    height: 25px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    margin: 20px 0 15px 0;
  }
  
  .alignment-meter-fill {
    height: 100%;
    background: linear-gradient(to right, #ff0055, #ffcc00, #00cc66);
    border-radius: 12px;
    transition: width 1.5s ease-out;
    width: 0%;
  }
  
  .alignment-meter-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: #aaa;
  }
  
  .alignment-meter-description {
    text-align: center;
    color: #ccc;
    margin-top: 15px;
    font-size: 0.95rem;
    line-height: 1.4;
  }
  
  /* service analysis */
  .services-section {
    margin-top: 40px;
    margin-bottom: 30px;
  }
  
  .services-section h3 {
    font-size: 1.8rem;
    color: #fff;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
    text-align: center;
  }
  
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
    margin-bottom: 30px;
  }
  
  .service-card {
    background: rgba(40, 40, 40, 0.8);
    border-radius: 12px;
    padding: 25px;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .service-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.2);
  }
  
  .service-card:hover::after {
    content: 'Click to analyze alignment';
    position: absolute;
    top: 10px;
    right: 75px;
    background: rgba(98, 0, 28, 0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.8rem;
    animation: pulse 2s infinite;
  }
  
  .service-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
  }
  
  .service-logo {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    margin-right: 15px;
    object-fit: cover;
    border: 2px solid rgba(255,255,255,0.1);
    background: white;
    padding: 3px;
  }
  
  .service-name {
    margin: 0;
    color: #fff;
    font-size: 1.3rem;
  }
  
  .service-category {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.9rem;
    font-weight: bold;
    margin-top: 5px;
  }

  .service-match-badge {
  position: absolute;
  top: -10px;
  right: -15px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.9rem;
  background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
  border: 2px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  z-index: 2;
  }

  .service-match-badge.high-match {
    background: linear-gradient(135deg, #006400, #008000);
    color: #00ff00;
    border-color: #00cc66;
  }

  .service-match-badge.medium-match {
    background: linear-gradient(135deg, #b5c500, #ffcc00);
    color: #ffff00;
    border-color: #ffcc00;
  }

  .service-match-badge.low-match {
    background: linear-gradient(135deg, #8b0000, #a8003a);
    color: #ff6666;
    border-color: #ff0055;
  }
  
  .gov-aligned { background: rgba(0, 102, 204, 0.2); color: #66aaff; }
  .business-aligned { background: rgba(0, 204, 102, 0.2); color: #66ffaa; }
  .conflicted { background: rgba(255, 204, 0, 0.2); color: #ffcc00; }
  .neutral { background: rgba(255, 255, 255, 0.1); color: #ccc; }
  
  #nextPoemBtn {
    background: linear-gradient(135deg, #0066cc, #0099ff) !important;
    animation: subtleGlow 2s infinite alternate;
    display: none;
    margin-top: 40px;
  }
  
  #nextPoemBtn.visible {
    display: inline-block !important;
  }
  
  #nextPoemBtn:hover {
    background: linear-gradient(135deg, #0099ff, #00ccff) !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 25px rgba(0, 102, 204, 0.5);
    animation: none;
  }
  
  @keyframes subtleGlow {
    from { box-shadow: 0 5px 20px rgba(0, 102, 204, 0.3); }
    to { box-shadow: 0 5px 25px rgba(0, 102, 204, 0.5); }
  }
  
  .comparison-view {
    opacity: 0;
    transform: translateX(50px);
    transition: opacity 0.5s ease, transform 0.5s ease;
    display: none;
    flex-direction: column;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    height: 100%;
  }
  
  .comparison-view.active {
    opacity: 1;
    transform: translateX(0);
    display: flex;
  }
  
  .single-column .comparison-column {
    max-width: 800px;
    width: 100%;
    margin: 0 auto;
  }
  
  .progress-steps {
    display: flex;
    justify-content: center;
    margin-top: 20px;
    margin-bottom: 40px;
    gap: 30px;
  }
  
  .step {
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0.5;
  }
  
  .step:hover {
    opacity: 0.8;
    transform: translateY(-5px);
  }
  
  .step.active {
    opacity: 1;
    transform: scale(1.05);
  }
  
  .step-number {
    width: 50px;
    height: 50px;
    background: rgba(98, 0, 28, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    font-weight: bold;
    margin: 0 auto 10px;
    border: 2px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }
  
  .step.active .step-number {
    background: linear-gradient(to right, #62001c, #8b0030);
    border-color: #ff0055;
    box-shadow: 0 0 20px rgba(255, 0, 85, 0.3);
  }
  
  .step.completed .step-number {
    background: linear-gradient(to right, #006400, #008000);
    border-color: #00cc66;
  }
  
  .step-label {
    font-size: 0.9rem;
    color: #aaa;
    transition: all 0.3s ease;
  }
  
  .step.active .step-label {
    color: #fff;
    font-weight: bold;
  }
  
  .step.completed .step-label {
    color: #00cc66;
  }
  
  .service-analysis-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 20px;
    box-sizing: border-box;
    transition: background 0.3s ease;
  }

  .service-analysis-modal.active {
    display: flex !important;
    background: rgba(0, 0, 0, 0.95);
  }

  .service-analysis-content {
    background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
    border-radius: 15px;
    padding: 30px;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .service-analysis-modal.active .service-analysis-content {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  
  .service-analysis-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
  }
  
  .service-analysis-logo {
    width: 60px;
    height: 60px;
    border-radius: 10px;
    margin-right: 20px;
    object-fit: cover;
    border: 3px solid rgba(255, 255, 255, 0.1);
    background: white;
    padding: 5px;
  }
  
  .service-analysis-title h2 {
    margin: 0;
    color: white;
    font-size: 1.8rem;
  }
  
  .service-analysis-category {
    display: inline-block;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
    margin-top: 8px;
  }
  
  .service-analysis-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }
  
  .service-analysis-close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
  }
  
  .alignment-section {
    margin-bottom: 30px;
  }
  
  .alignment-section h3 {
    color: white;
    font-size: 1.3rem;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .alignment-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
  }
  
  .alignment-item {
    background: rgba(40, 40, 40, 0.8);
    border-radius: 8px;
    padding: 15px;
    border-left: 4px solid transparent;
  }
  
  .alignment-item.matches {
    border-left-color: #00cc66;
  }
  
  .alignment-item.mismatches {
    border-left-color: #ff4444;
  }
  
  .alignment-item.neutral {
    border-left-color: #888;
  }
  
  .alignment-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }
  
  .alignment-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    font-weight: bold;
  }
  
  .matches .alignment-icon {
    background: rgba(0, 204, 102, 0.2);
    color: #00cc66;
  }
  
  .mismatches .alignment-icon {
    background: rgba(255, 68, 68, 0.2);
    color: #ff4444;
  }
  
  .neutral .alignment-icon {
    background: rgba(136, 136, 136, 0.2);
    color: #888;
  }
  
  .alignment-header h4 {
    margin: 0;
    color: white;
    font-size: 1rem;
  }
  
  .alignment-description {
    color: #ccc;
    font-size: 0.9rem;
    line-height: 1.4;
    margin-bottom: 8px;
  }
  
  .alignment-examples {
    font-size: 0.8rem;
    color: #888;
    font-style: italic;
    margin-top: 5px;
  }
  
  .alignment-examples strong {
    color: #aaa;
  }
  
  .alignment-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
  }
  
  .summary-stat {
    background: rgba(30, 30, 30, 0.8);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
  }
  
  .summary-stat-value {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .gov-match .summary-stat-value {
    color: #6670ff;
  }
  
  .business-match .summary-stat-value {
    color: #00a000;
  }
  
  .overall-match .summary-stat-value {
    color: #b5c500;
  }
  
  .summary-stat-label {
    color: #ff0055;
    font-size: 0.9rem;
  }
  
  .service-card * {
    pointer-events: none;
  }
  
  @media (max-width: 1024px) {
    .comparison-container {
      flex-direction: column;
    }
    
    .services-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
  }
  
  @media (max-width: 768px) {
    .overlay-text {
      position: relative;
      top: auto;
      left: auto;
      transform: none;
      width: 100%;
      text-align: center;
      margin-top: 20px;
    }
    
    .main-content {
      position: relative;
      top: auto;
      left: auto;
      transform: none;
      width: 100%;
      height: auto;
      padding: 20px;
    }
    
    .main-content img {
      width: 100%;
      max-width: 300px;
    }
    
    .service-analysis-content {
      padding: 20px;
      max-height: 95vh;
    }
    
    .service-analysis-header {
      flex-direction: column;
      text-align: center;
    }
    
    .service-analysis-logo {
      margin-right: 0;
      margin-bottom: 15px;
    }
    
    .alignment-grid {
      grid-template-columns: 1fr;
    }
    
    .alignment-summary {
      grid-template-columns: 1fr;
    }
    
    .progress-steps {
      gap: 15px;
    }
    
    .step-number {
      width: 40px;
      height: 40px;
      font-size: 1rem;
    }
    
    .step-label {
      font-size: 0.8rem;
    }
    
    .services-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .alignment-meter-header h3 {
      font-size: 1.3rem;
    }
    
    .alignment-meter-value {
      font-size: 2rem;
    }
  }
</style>
</head>
<body>

<!-- particle background -->
<canvas id="particleCanvas"></canvas>

<!-- pixelated words -->
<canvas id="wordCanvas"></canvas>

<!-- main content -->
<div class="main-content">
  <img src="https://i.guim.co.uk/img/static/sys-images/Guardian/Pix/pictures/2015/7/21/1437478115100/98b03e87-e1ac-4f67-892c-819b7122ae3e-1020x612.jpeg?width=700&quality=85&auto=format&fit=max&s=88dfa3220296e69522c03333a89b8185" alt="Panopticon">
  <div class="overlay-text">
    <p><mark>the man-made eye never rests<br>
      the more it knows, the easier it pretends<br>
      reigning its life above the panopticon<br>
      immortal, tortured soul on your deathbed<br><br>
      it‚Äôs for the public order<br>
      this world lasts forever<br>
      for the dragon, foundation<br>
      for the eagle, liquidation<br><br>
    <a id="enterPreferencesLink" href="#">create your panopticon</a></mark></p>
  </div>
</div>

<!-- Service Analysis Modal -->
<div class="service-analysis-modal" id="serviceAnalysisModal">
  <button class="service-analysis-close" id="closeAnalysisBtn">√ó</button>
  <div class="service-analysis-content" id="serviceAnalysisContent">
    <!-- Content will be dynamically populated -->
  </div>
</div>

<!-- Data Preferences Container -->
<div id="dataPreferencesContainer">
  <!-- NEW: Government Surveillance View (Step 1) -->
  <div id="govView" class="comparison-view active">
    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step active" data-step="gov">
        <div class="step-number">1</div>
        <div class="step-label">Government</div>
      </div>
      <div class="step" data-step="business">
        <div class="step-number">2</div>
        <div class="step-label">Business</div>
      </div>
      <div class="step" data-step="results">
        <div class="step-number">3</div>
        <div class="step-label">Alignment</div>
      </div>
    </div>
    
    <div class="single-column">
      <div class="comparison-column gov-column">
        <div class="column-header">
          <h2><span class="column-icon">üèõÔ∏è</span> Government Surveillance</h2>
        </div>
        
        <div class="column-description">
          <h2>If you were in charge of government surveillance, what would you monitor?</h2>
          <p>As the government, your priorities are national security, law enforcement, and public safety. What surveillance capabilities would you implement?</p>
        </div>
        
        <div class="quick-select">
          <button class="quick-btn gov-select-all">Select All</button>
          <button class="quick-btn gov-clear-all">Clear All</button>
        </div>
        
        <div class="data-items-grid" id="govGrid">
          <!-- Government surveillance items will be generated here -->
        </div>
      </div>
    </div>
    
    <div class="action-buttons">
      <button class="action-btn" id="nextToBusinessBtn">
        Continue to Business Surveillance ‚Üí
      </button>
    </div>
  </div>
  
  <!-- NEW: Business Surveillance View (Step 2) -->
  <div id="businessView" class="comparison-view">
    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step completed" data-step="gov">
        <div class="step-number">‚úì</div>
        <div class="step-label">Government</div>
      </div>
      <div class="step active" data-step="business">
        <div class="step-number">2</div>
        <div class="step-label">Business</div>
      </div>
      <div class="step" data-step="results">
        <div class="step-number">3</div>
        <div class="step-label">Alignment</div>
      </div>
    </div>
    
    <div class="single-column">
      <div class="comparison-column business-column">
        <div class="column-header">
          <h2><span class="column-icon">üè¢</span> Business Surveillance</h2>
        </div>
        
        <div class="column-description">
          <h2>If you were in charge of surveillance for a major tech/media company, what would you monitor?</h2>
          <p>As a corporation, your priorities are profit, market advantage, and customer retention. What data would you collect to maximize these goals?</p>
        </div>
        
        <div class="quick-select">
          <button class="quick-btn business-select-all">Select All</button>
          <button class="quick-btn business-clear-all">Clear All</button>
        </div>
        
        <div class="data-items-grid" id="businessGrid">
          <!-- Business surveillance items will be generated here -->
        </div>
      </div>
    </div>
    
    <div class="action-buttons">
      <button class="action-btn" id="backToGovBtn">
        ‚Üê Back to Government
      </button>
      <button class="action-btn" id="calculateBtn">
        Calculate Alignment ‚Üí
      </button>
    </div>
  </div>
  
  <!-- NEW: Alignment Results View (Step 3) - WITH ALIGNMENT METER -->
  <div id="resultsView" class="comparison-view">
    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step completed" data-step="gov">
        <div class="step-number">‚úì</div>
        <div class="step-label">Government</div>
      </div>
      <div class="step completed" data-step="business">
        <div class="step-number">‚úì</div>
        <div class="step-label">Business</div>
      </div>
      <div class="step active" data-step="results">
        <div class="step-number">3</div>
        <div class="step-label">Alignment</div>
      </div>
    </div>
    
    <!-- Results Content - WITH ALIGNMENT METER -->
    <div id="resultsContent">
      <!-- Alignment Meter -->
      <div class="alignment-meter-container">
        <div class="alignment-meter-header">
          <h3>Overall Surveillance Alignment Score</h3>
          <div class="alignment-meter-value" id="alignmentScore">0%</div>
        </div>
        <div class="alignment-meter">
          <div class="alignment-meter-fill" id="alignmentMeterFill"></div>
        </div>
        <div class="alignment-meter-labels">
          <span>Low Alignment</span>
          <span>Moderate</span>
          <span>High Alignment</span>
        </div>
        <div class="alignment-meter-description" id="alignmentDescription">
          Calculating your average alignment with services you use...
        </div>
      </div>
      
      <!-- Services You Use -->
      <div class="services-section" id="usedServicesSection">
        <h3>Services You Use</h3>
        <div class="services-grid" id="usedServicesGrid">
          <!-- Services you use will appear here -->
        </div>
      </div>
      
      <!-- Services You Don't Use -->
      <div class="services-section" id="unusedServicesSection">
        <h3>Services You Don't Use</h3>
        <div class="services-grid" id="unusedServicesGrid">
          <!-- Services you don't use will appear here -->
        </div>
      </div>
      
      <!-- Read Next Poem Button -->
      <div style="margin-top: 60px; padding-top: 40px; border-top: 2px solid rgba(255,255,255,0.1); text-align: center;">
        <button id="nextPoemBtn" class="action-btn">
          Continue to Next Poem ‚Üí
        </button>
      </div>
    </div>
    
    <!-- Back button for results -->
    <div class="action-buttons">
      <button class="action-btn" id="backFromResultsBtn">
        ‚Üê Back to Business
      </button>
    </div>
  </div>

<script>
// surveillance categories
const surveillanceData = {
  government: [
    {
      id: "national-security",
      title: "Mass Communications Surveillance",
      description: "Monitor all digital communications for security threats",
      examples: ["Email scanning", "Social media monitoring", "Encryption bypass"]
    },
    {
      id: "location-tracking",
      title: "Citizen Location Tracking",
      description: "Track movement patterns of all citizens",
      examples: ["Cell tower logs", "License plate readers", "Public transit cards"]
    },
    {
      id: "biometric-data",
      title: "Biometric Identification",
      description: "Collect facial recognition, fingerprints, DNA",
      examples: ["Face scans in public", "Border biometrics", "National ID database"]
    },
    {
      id: "financial-surveillance",
      title: "Financial Transaction Monitoring",
      description: "Track all financial transactions above threshold",
      examples: ["Bank transfers", "Crypto transactions", "Large cash movements"]
    },
    {
      id: "social-graph-analysis",
      title: "Social Connection Mapping",
      description: "Map relationships between citizens",
      examples: ["Phone call networks", "Social media connections", "Association patterns"]
    },
    {
      id: "predictive-policing",
      title: "Predictive Behavior Analysis",
      description: "Use AI to predict criminal behavior",
      examples: ["Risk scoring algorithms", "Movement pattern prediction", "Social media sentiment"]
    },
    {
      id: "health-data",
      title: "Public Health Surveillance",
      description: "Monitor health data for disease control",
      examples: ["Medical records", "Vaccination status", "Health app data"]
    },
    {
      id: "travel-monitoring",
      title: "Travel Pattern Analysis",
      description: "Track domestic and international travel",
      examples: ["Flight manifests", "Hotel bookings", "Border crossing records"]
    },
    {
      id: "protest-monitoring",
      title: "Public Gathering Surveillance",
      description: "Monitor protests and public assemblies",
      examples: ["Drone surveillance", "Social media event tracking", "Crowd analysis"]
    },
    {
      id: "employment-monitoring",
      title: "Employment & Education Tracking",
      description: "Monitor career and education paths",
      examples: ["Job applications", "University enrollment", "Professional licenses"]
    }
  ],
  
  business: [
    {
      id: "behavioral-tracking",
      title: "Behavioral Data Collection",
      description: "Track every click, scroll, and interaction",
      examples: ["Mouse movements", "Time on page", "Click patterns"]
    },
    {
      id: "personal-profiling",
      title: "Detailed Personal Profiling",
      description: "Build complete psychological profiles",
      examples: ["Personality inference", "Political leaning", "Emotional state"]
    },
    {
      id: "social-surveillance",
      title: "Social Network Exploitation",
      description: "Map and exploit social connections",
      examples: ["Friend networks", "Influence mapping", "Social proof triggers"]
    },
    {
      id: "purchase-prediction",
      title: "Purchase Prediction & Manipulation",
      description: "Predict and influence buying decisions",
      examples: ["Price testing", "Timed offers", "Addiction mechanics"]
    },
    {
      id: "attention-optimization",
      title: "Attention Optimization",
      description: "Maximize engagement and screen time",
      examples: ["Addictive algorithms", "Notification optimization", "Content personalization"]
    },
    {
      id: "location-exploitation",
      title: "Location Data Monetization",
      description: "Use location data for targeted offers",
      examples: ["Geofenced ads", "Competitor monitoring", "Lifestyle inference"]
    },
    {
      id: "emotional-manipulation",
      title: "Emotional State Detection",
      description: "Detect and respond to emotional states",
      examples: ["Voice tone analysis", "Facial expression reading", "Typing pattern analysis"]
    },
    {
      id: "cross-device-tracking",
      title: "Cross-Device Tracking",
      description: "Track users across all their devices",
      examples: ["Device fingerprinting", "Account linking", "Behavioral matching"]
    },
    {
      id: "data-brokering",
      title: "Data Aggregation & Brokering",
      description: "Collect and sell comprehensive data",
      examples: ["Data marketplace", "Audience segments", "Predictive modeling"]
    },
    {
      id: "dark-patterns",
      title: "Manipulative Design Patterns",
      description: "Use psychological tricks to influence behavior",
      examples: ["Forced consent", "Hidden options", "Misleading defaults"]
    }
  ]
};

let userSelections = {
  government: {},
  business: {}
};

// company data
const companyData = [
  {
    id: "alibaba",
    name: "Alibaba",
    summary: "Chinese e-commerce giant with deep government integration for surveillance capitalism.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "location-tracking", "social-graph-analysis", 
      "financial-surveillance", "employment-monitoring", "travel-monitoring",
      // business
      "behavioral-tracking", "personal-profiling", "purchase-prediction", 
      "location-exploitation", "cross-device-tracking", "data-brokering"
    ]
  },
  {
    id: "alphabet",
    name: "Alphabet / Google",
    summary: "Search and advertising giant that complies with global government surveillance requests.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "location-tracking", "social-graph-analysis", 
      "financial-surveillance", "travel-monitoring", "protest-monitoring",
      // business
      "behavioral-tracking", "personal-profiling", "social-surveillance", 
      "attention-optimization", "cross-device-tracking", "data-brokering", 
      "location-exploitation", "dark-patterns", "emotional-manipulation"
    ]
  },
  {
    id: "apple",
    name: "Apple",
    summary: "Privacy-focused but complies with government requests and collects significant location data.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "location-tracking", "financial-surveillance", "travel-monitoring",
      // business
      "behavioral-tracking", "location-exploitation", "cross-device-tracking", 
      "personal-profiling", "attention-optimization"
    ]
  },
  {
    id: "meta",
    name: "Meta",
    summary: "Social media giant with extensive data collection for ads and government cooperation.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "social-graph-analysis", "protest-monitoring", "location-tracking",
      "national-security", "predictive-policing",
      // business
      "behavioral-tracking", "personal-profiling", "social-surveillance", 
      "attention-optimization", "emotional-manipulation", "data-brokering",
      "cross-device-tracking", "location-exploitation", "dark-patterns"
    ]
  },
  {
    id: "microsoft",
    name: "Microsoft",
    summary: "Enterprise software leader with government contracts and cloud surveillance capabilities.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "financial-surveillance", "travel-monitoring",
      "location-tracking", "employment-monitoring",
      // business
      "behavioral-tracking", "cross-device-tracking", "data-brokering", 
      "personal-profiling", "location-exploitation", "attention-optimization"
    ]
  },
  {
    id: "tencent",
    name: "Tencent",
    summary: "Chinese social media and gaming giant integrated with government surveillance systems.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "location-tracking", "social-graph-analysis",
      "financial-surveillance", "health-data", "protest-monitoring",
      "employment-monitoring", "biometric-data",
      // business
      "behavioral-tracking", "personal-profiling", "social-surveillance", 
      "attention-optimization", "cross-device-tracking", "data-brokering"
    ]
  },
  {
    id: "tiktok",
    name: "TikTok",
    summary: "Video platform under scrutiny for potential data sharing with Chinese government.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "location-tracking", "social-graph-analysis",
      "protest-monitoring", "predictive-policing",
      // business
      "behavioral-tracking", "personal-profiling", "attention-optimization", 
      "emotional-manipulation", "dark-patterns", "social-surveillance", 
      "cross-device-tracking", "location-exploitation"
    ]
  },
  {
    id: "amazon",
    name: "Amazon",
    summary: "E-commerce and cloud provider with government contracts and extensive consumer tracking.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "financial-surveillance", "location-tracking",
      // business
      "behavioral-tracking", "purchase-prediction", "location-exploitation", 
      "data-brokering", "personal-profiling", "cross-device-tracking", 
      "attention-optimization", "dark-patterns"
    ]
  },
  {
    id: "netflix",
    name: "Netflix",
    summary: "Streaming service primarily focused on business surveillance for content recommendations.",
    surveillanceType: "business",
    surveillancePractices: [
      // business
      "behavioral-tracking", "attention-optimization", "personal-profiling", 
      "purchase-prediction", "emotional-manipulation"
    ]
  },
  {
    id: "openai",
    name: "OpenAI",
    summary: "AI company with potential for both commercial and government surveillance applications.",
    surveillanceType: "business",
    surveillancePractices: [
      // business
      "behavioral-tracking", "personal-profiling", "data-brokering", 
      "attention-optimization", "emotional-manipulation"
    ]
  },
  {
    id: "spotify",
    name: "Spotify",
    summary: "Music streaming service focused on commercial surveillance for advertising.",
    surveillanceType: "business",
    surveillancePractices: [
      // business
      "behavioral-tracking", "personal-profiling", "attention-optimization", 
      "emotional-manipulation", "purchase-prediction", "cross-device-tracking"
    ]
  },
  {
    id: "xiaohongshu",
    name: "Xiaohongshu",
    summary: "Chinese social e-commerce platform integrated with government surveillance.",
    surveillanceType: "both",
    surveillancePractices: [
      // gov
      "national-security", "location-tracking", "social-graph-analysis",
      "protest-monitoring", "health-data",
      // business
      "behavioral-tracking", "purchase-prediction", "social-surveillance", 
      "personal-profiling", "attention-optimization", "emotional-manipulation", 
      "location-exploitation", "data-brokering"
    ]
  }
];

// company logos
const companyLogos = {
  alibaba: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREXxWppPgNoDOukU_2RHGUnoU-_i664iBN5w&s",
  alphabet: "https://logos-world.net/wp-content/uploads/2022/05/Alphabet-Emblem.png",
  apple: "https://1000logos.net/wp-content/uploads/2016/10/Apple-Logo.jpg",
  meta: "https://static.dezeen.com/uploads/2021/11/meta-facebook-rebranding-name-news_dezeen_2364_col_hero2.jpg",
  microsoft: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/2048px-Microsoft_logo.svg.png",
  tencent: "https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1f357271-2c36-460a-b3f5-e7d1719417f4_600x450.jpeg",
  tiktok: "https://cdn.mos.cms.futurecdn.net/DgtQSxAYAHv52vo69JGcKB.jpg",
  amazon: "https://upload.wikimedia.org/wikipedia/commons/d/de/Amazon_icon.png",
  netflix: "https://images.ctfassets.net/y2ske730sjqp/5QQ9SVIdc1tmkqrtFnG9U1/de758bba0f65dcc1c6bc1f31f161003d/BrandAssets_Logos_02-NSymbol.jpg?w=940",
  openai: "https://cdn.worldvectorlogo.com/logos/openai-2.svg",
  spotify: "https://www.citypng.com/public/uploads/preview/square-black-green-spotify-app-icon-png-701751694969849j7wtxvnrgo.png",
  xiaohongshu: "https://upload.wikimedia.org/wikipedia/commons/c/c1/XiaohongshuLOGO.png"
};

function savePreferencesToLocalStorage() {
  try {
    localStorage.setItem('surveillancePreferences', JSON.stringify(userSelections));
    return true;
  } catch (error) {
    console.error('Error saving preferences:', error);
    return false;
  }
}

function loadPreferencesFromLocalStorage() {
  try {
    const savedData = localStorage.getItem('surveillancePreferences');
    if (savedData) {
      const parsedData = JSON.parse(savedData);      
      if (parsedData && typeof parsedData === 'object') {
        userSelections = {
          government: {},
          business: {}
        };
          if (parsedData.government && typeof parsedData.government === 'object') {
          surveillanceData.government.forEach(item => {
            userSelections.government[item.id] = parsedData.government[item.id] !== undefined 
              ? parsedData.government[item.id] 
              : true;
          });
        } else {
          surveillanceData.government.forEach(item => {
            userSelections.government[item.id] = true;
          });
        }
        if (parsedData.business && typeof parsedData.business === 'object') {
          surveillanceData.business.forEach(item => {
            userSelections.business[item.id] = parsedData.business[item.id] !== undefined 
              ? parsedData.business[item.id] 
              : true;
          });
        } else {
          surveillanceData.business.forEach(item => {
            userSelections.business[item.id] = true;
          });
        }
        
        console.log('Loaded preferences:', userSelections);
        return true;
      }
    }
    
    console.log('No valid saved data found, setting defaults');
    setDefaultSelections();
    savePreferencesToLocalStorage();
    return false;
    
  } catch (error) {
    console.error('Error loading preferences:', error);
    setDefaultSelections();
    savePreferencesToLocalStorage();
    return false;
  }
}

function setDefaultSelections() {
  userSelections = {
    government: {},
    business: {}
  };
  
  surveillanceData.government.forEach(item => {
    userSelections.government[item.id] = true;
  });
  
  surveillanceData.business.forEach(item => {
    userSelections.business[item.id] = true;
  });
  
  console.log('Default selections set:', userSelections);
}

let currentView = 'gov';

function showView(viewName) {
  if (currentView === viewName) return;
  
  const allViews = ['govView', 'businessView', 'resultsView'];
  const viewOrder = { gov: 0, business: 1, results: 2 };
  const direction = viewOrder[viewName] > viewOrder[currentView] ? 'next' : 'prev'; 

  const currentViewEl = document.getElementById(`${currentView}View`);
  if (currentViewEl) {
    currentViewEl.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
    
    if (direction === 'next') {
      currentViewEl.style.opacity = '0';
      currentViewEl.style.transform = 'translateX(-50px)';
    } else {
      currentViewEl.style.opacity = '0';
      currentViewEl.style.transform = 'translateX(50px)';
    }
    
    setTimeout(() => {
      currentViewEl.classList.remove('active');
      currentViewEl.style.opacity = '';
      currentViewEl.style.transform = '';
      currentViewEl.style.transition = '';
    }, 500);
  }
  
  setTimeout(() => {
    const newViewEl = document.getElementById(`${viewName}View`);
    if (newViewEl) {
      newViewEl.classList.add('active');
      
      newViewEl.style.opacity = '0';
      if (direction === 'next') {
        newViewEl.style.transform = 'translateX(50px)';
      } else {
        newViewEl.style.transform = 'translateX(-50px)';
      }
      
      newViewEl.offsetHeight;
      newViewEl.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
      newViewEl.style.opacity = '1';
      newViewEl.style.transform = 'translateX(0)';
      
      setTimeout(() => {
        newViewEl.style.opacity = '';
        newViewEl.style.transform = '';
        newViewEl.style.transition = '';
      }, 500);
      
      currentView = viewName;
      
      const container = document.getElementById('dataPreferencesContainer');
      container.scrollTo({ top: 0, behavior: 'smooth' });
      
      if (viewName === 'gov') {
        generateSurveillanceItems('government', surveillanceData.government, 'govGrid');
      } else if (viewName === 'business') {
        generateSurveillanceItems('business', surveillanceData.business, 'businessGrid');
      } else if (viewName === 'results') {
        analyzeSurveillance();
      }
    }
  }, 500);
}

function setupProgressStepHandlers() {
  document.querySelectorAll('.step').forEach(step => {
    step.addEventListener('click', (e) => {
      const targetStep = e.currentTarget.dataset.step;
      
      if (targetStep === currentView) return;
      const stepOrder = { gov: 0, business: 1, results: 2 };
      const currentStepIndex = stepOrder[currentView];
      const targetStepIndex = stepOrder[targetStep];
      
      if (targetStepIndex > currentStepIndex + 1) {
        return;
      }
      
      if (targetStep === 'results' && currentView === 'gov') {
        return;
      }
      
      showView(targetStep);
    });
  });
}

function generateSurveillanceItems(column, items, gridId) {
  const grid = document.getElementById(gridId);
  grid.innerHTML = '';
  
  items.forEach(item => {
    const isSelected = userSelections[column][item.id];
    
    const itemEl = document.createElement('div');
    itemEl.className = `data-item ${isSelected ? 'selected' : ''}`;
    itemEl.dataset.id = item.id;
    itemEl.dataset.column = column;
    
    itemEl.innerHTML = `
      <div class="data-item-toggle"></div>
      <div class="data-item-content">
        <h3>${item.title}</h3>
        <p>${item.description}</p>
        <small style="color: #888; font-style: italic;">Examples: ${item.examples.join(', ')}</small>
      </div>
    `;
    
    itemEl.addEventListener('click', () => {
      userSelections[column][item.id] = !userSelections[column][item.id];
      itemEl.classList.toggle('selected');
      
      savePreferencesToLocalStorage();
      console.log(`${column} selection updated:`, userSelections[column]);
    });
    
    grid.appendChild(itemEl);
  });
}

// start interface
function initializeSurveillanceInterface() {
  loadPreferencesFromLocalStorage();
  
  generateSurveillanceItems('government', surveillanceData.government, 'govGrid');
  setupProgressStepHandlers();
  setupQuickSelectButtons();
  
  console.log('Interface initialized with:', userSelections);
}

function setupQuickSelectButtons() {
  document.querySelector('.gov-select-all').addEventListener('click', () => {
    if (currentView !== 'gov') return;
    surveillanceData.government.forEach(item => {
      userSelections.government[item.id] = true;
    });
    generateSurveillanceItems('government', surveillanceData.government, 'govGrid');
    savePreferencesToLocalStorage();
  });
  
  document.querySelector('.gov-clear-all').addEventListener('click', () => {
    if (currentView !== 'gov') return;
    surveillanceData.government.forEach(item => {
      userSelections.government[item.id] = false;
    });
    generateSurveillanceItems('government', surveillanceData.government, 'govGrid');
    savePreferencesToLocalStorage();
  });
  
  document.querySelector('.business-select-all').addEventListener('click', () => {
    if (currentView !== 'business') return;
    surveillanceData.business.forEach(item => {
      userSelections.business[item.id] = true;
    });
    generateSurveillanceItems('business', surveillanceData.business, 'businessGrid');
    savePreferencesToLocalStorage();
  });
  
  document.querySelector('.business-clear-all').addEventListener('click', () => {
    if (currentView !== 'business') return;
    surveillanceData.business.forEach(item => {
      userSelections.business[item.id] = false;
    });
    generateSurveillanceItems('business', surveillanceData.business, 'businessGrid');
    savePreferencesToLocalStorage();
  });
}

function getUserSelectedServices() {
  try {
    const selectedCompaniesData = JSON.parse(localStorage.getItem('selectedCompaniesData') || '[]');
    
    if (selectedCompaniesData.length > 0 && selectedCompaniesData[0] && selectedCompaniesData[0].dataCollectedDirectly) {
      return selectedCompaniesData;
    }

    const selectedServices = JSON.parse(localStorage.getItem('selectedServices') || '[]');
    
    if (selectedServices.length > 0) {
      const services = selectedServices.map(serviceId => {
        const fullCompany = companyData.find(c => c.id === serviceId);
        if (fullCompany) {
          return fullCompany;
        }
        
        return {
          id: serviceId,
          name: serviceId.charAt(0).toUpperCase() + serviceId.slice(1),
          summary: `Data collection service`,
          surveillanceType: "business",
          surveillancePractices: ["behavioral-tracking", "data-brokering"]
        };
      }).filter(Boolean);
      
      return services;
    }
    
    const fallbackServices = [
      companyData.find(c => c.id === "alphabet"),
      companyData.find(c => c.id === "meta"),
      companyData.find(c => c.id === "amazon"),
    ].filter(Boolean);
    
    return fallbackServices;
    
  } catch (error) {
    return [];
  }
}

function getUnusedServices(usedServices) {
  const usedServiceIds = usedServices.map(service => service.id);
  return companyData.filter(company => !usedServiceIds.includes(company.id));
}

// avg alignment score for services used
function calculateAverageAlignment(usedServices, govPriorities, businessPriorities) {
  if (usedServices.length === 0) return 0;
  
  let totalAlignment = 0;
  let validServices = 0;
  
  usedServices.forEach(service => {
    const serviceData = companyData.find(c => c.id === service.id) || service;
    
    const govPracticeCount = serviceData.surveillancePractices?.filter(practice => {
      const govItem = surveillanceData.government.find(g => g.id === practice);
      return govItem && govPriorities.some(gp => gp.id === govItem.id);
    }).length || 0;
    
    const businessPracticeCount = serviceData.surveillancePractices?.filter(practice => {
      const businessItem = surveillanceData.business.find(b => b.id === practice);
      return businessItem && businessPriorities.some(bp => bp.id === businessItem.id);
    }).length || 0;
    
    const totalGovPracticesInService = serviceData.surveillancePractices?.filter(practice => 
      surveillanceData.government.some(g => g.id === practice)
    ).length || 0;
    
    const totalBusinessPracticesInService = serviceData.surveillancePractices?.filter(practice => 
      surveillanceData.business.some(b => b.id === practice)
    ).length || 0;
    
    let govMatchPercentage = 0;
    if (totalGovPracticesInService === 0) {
    govMatchPercentage = 100;
    } else {
    govMatchPercentage = Math.round((govPracticeCount / totalGovPracticesInService) * 100);
    }

    let businessMatchPercentage = 0;
    if (totalBusinessPracticesInService === 0) {
    businessMatchPercentage = 100;
    } else {
    businessMatchPercentage = Math.round((businessPracticeCount / totalBusinessPracticesInService) * 100);
    }

    let matchPercentage = 0;
    if (govMatchPercentage > 0 && businessMatchPercentage > 0) {
    matchPercentage = Math.round((govMatchPercentage + businessMatchPercentage) / 2);
    } else if (govMatchPercentage > 0) {
    matchPercentage = govMatchPercentage;
    } else if (businessMatchPercentage > 0) {
    matchPercentage = businessMatchPercentage;
    }
    
    totalAlignment += matchPercentage;
    validServices++;
  });
  
  return validServices > 0 ? Math.round(totalAlignment / validServices) : 0;
}

function getAlignmentDescription(score) {
  if (score >= 80) {
    return "Excellent alignment! Your surveillance preferences closely match the services you use.";
  } else if (score >= 60) {
    return "Good alignment. Your preferences generally align with the services you use.";
  } else if (score >= 40) {
    return "Moderate alignment. There's some alignment but also significant differences.";
  } else if (score >= 20) {
    return "Low alignment. Your preferences differ significantly from the services you use personally.";
  } else {
    return "Very low alignment. Your surveillance preferences are quite different from what you use personally.";
  }
}

function updateAlignmentMeter(score) {
  const meterFill = document.getElementById('alignmentMeterFill');
  const scoreElement = document.getElementById('alignmentScore');
  const descriptionElement = document.getElementById('alignmentDescription');
  
  setTimeout(() => {
    meterFill.style.width = `${score}%`;
  }, 300);
  
  let currentScore = 0;
  const increment = Math.ceil(score / 30);
  const timer = setInterval(() => {
    currentScore += increment;
    if (currentScore >= score) {
      currentScore = score;
      clearInterval(timer);
    }
    scoreElement.textContent = `${currentScore}%`;
  }, 50);
  
  descriptionElement.textContent = getAlignmentDescription(score);
}

function analyzeSurveillance() {
  const govPriorities = surveillanceData.government.filter(item => userSelections.government[item.id]);
  const businessPriorities = surveillanceData.business.filter(item => userSelections.business[item.id]);
  const usedServices = getUserSelectedServices();
  const unusedServices = getUnusedServices(usedServices);
    
  const averageAlignment = calculateAverageAlignment(usedServices, govPriorities, businessPriorities);
  updateAlignmentMeter(averageAlignment);
  displayServicesAnalysis(usedServices, 'usedServicesGrid', govPriorities, businessPriorities, 'Services You Use');
  displayServicesAnalysis(unusedServices, 'unusedServicesGrid', govPriorities, businessPriorities, 'Services You Don\'t Use');
  document.getElementById('nextPoemBtn').classList.add('visible');
}

function getServiceAlignmentDetails(service, govPriorities, businessPriorities) {
  const matches = [];
  const mismatches = [];
  const govPracticesInService = [];
  const businessPracticesInService = [];
  const selectedGovPriorityIds = govPriorities.map(p => p.id);
  const selectedBusinessPriorityIds = businessPriorities.map(p => p.id);
  
  service.surveillancePractices?.forEach(practiceId => {
    const govPractice = surveillanceData.government.find(g => g.id === practiceId);
    if (govPractice) {
      govPracticesInService.push(govPractice);
      const isSelected = selectedGovPriorityIds.includes(govPractice.id);
      if (isSelected) {
        matches.push({
          ...govPractice,
          type: 'government'
        });
      } else {
        mismatches.push({
          ...govPractice,
          type: 'government'
        });
      }
      return;
    }
    
    const businessPractice = surveillanceData.business.find(b => b.id === practiceId);
    if (businessPractice) {
      businessPracticesInService.push(businessPractice);
      const isSelected = selectedBusinessPriorityIds.includes(businessPractice.id);
      if (isSelected) {
        matches.push({
          ...businessPractice,
          type: 'business'
        });
      } else {
        mismatches.push({
          ...businessPractice,
          type: 'business'
        });
      }
    }
  });
  
  const govMatchCount = matches.filter(m => m.type === 'government').length;
  const businessMatchCount = matches.filter(m => m.type === 'business').length;
  
  const totalGovPractices = govPracticesInService.length;
  const totalBusinessPractices = businessPracticesInService.length;
  
  let govMatchPercentage = 0;
    if (totalGovPractices === 0) {
    govMatchPercentage = 100;
    } else {
    govMatchPercentage = Math.round((govMatchCount / totalGovPractices) * 100);
    }

  let businessMatchPercentage = 0;
    if (totalBusinessPractices === 0) {
    businessMatchPercentage = 100;
    } else {
    businessMatchPercentage = Math.round((businessMatchCount / totalBusinessPractices) * 100);
    }

    overallMatchPercentage = Math.round((govMatchPercentage + businessMatchPercentage) / 2);
    
  let categoryClass = 'neutral';
  let categoryText = 'Neutral Surveillance';
  
  if (service.surveillanceType === 'government') {
    categoryClass = 'gov-aligned';
    categoryText = 'Government-Aligned Surveillance';
  } else if (service.surveillanceType === 'business') {
    categoryClass = 'business-aligned';
    categoryText = 'Business-Aligned Surveillance';
  } else if (service.surveillanceType === 'both') {
    categoryClass = 'conflicted';
    categoryText = 'Dual-Purpose Surveillance';
  }
  
  return {
    matches,
    mismatches,
    govMatchCount,
    businessMatchCount,
    totalGovPractices,
    totalBusinessPractices,
    govMatchPercentage,
    businessMatchPercentage,
    overallMatchPercentage,
    categoryClass,
    categoryText,
    govPracticesInService,
    businessPracticesInService
  };
}

function showServiceAnalysis(service, govPriorities, businessPriorities) { 
  const modal = document.getElementById('serviceAnalysisModal');
  const content = document.getElementById('serviceAnalysisContent');
  const alignmentDetails = getServiceAlignmentDetails(service, govPriorities, businessPriorities);
  
  content.innerHTML = `
    <div class="service-analysis-header">
      <img class="service-analysis-logo" src="${companyLogos[service.id] || ''}" alt="${service.name}" onerror="this.style.display='none'">
      <div class="service-analysis-title">
        <h2>${service.name}</h2>
        <span class="service-analysis-category ${alignmentDetails.categoryClass}">${alignmentDetails.categoryText}</span>
      </div>
    </div>
    
    <p style="color: #ccc; margin-bottom: 30px; font-size: 1.1rem;">${service.summary}</p>
    
    <!-- Summary Statistics -->
    <div class="alignment-summary">
      <div class="summary-stat gov-match">
        <div class="summary-stat-value">${alignmentDetails.govMatchPercentage}%</div>
        <div class="summary-stat-label">Government Priority Match</div>
        <div style="font-size: 0.8rem; color: #aaa;">${alignmentDetails.govMatchCount}/${alignmentDetails.totalGovPractices} practices</div>
      </div>
      <div class="summary-stat business-match">
        <div class="summary-stat-value">${alignmentDetails.businessMatchPercentage}%</div>
        <div class="summary-stat-label">Business Priority Match</div>
        <div style="font-size: 0.8rem; color: #aaa;">${alignmentDetails.businessMatchCount}/${alignmentDetails.totalBusinessPractices} practices</div>
      </div>
      <div class="summary-stat overall-match">
        <div class="summary-stat-value">${alignmentDetails.overallMatchPercentage}%</div>
        <div class="summary-stat-label">Overall Alignment</div>
        <div style="font-size: 0.8rem; color: #aaa;">Average of both matches</div>
      </div>
    </div>
    
    <!-- Matches Section -->
    ${alignmentDetails.matches.length > 0 ? `
    <div class="alignment-section">
      <h3>üîç Practices That Match Your Preferences</h3>
      <div class="alignment-grid">
        ${alignmentDetails.matches.map(match => `
          <div class="alignment-item matches">
            <div class="alignment-header">
              <div class="alignment-icon">‚úì</div>
              <h4>${match.title}</h4>
            </div>
            <div class="alignment-description">${match.description}</div>
            <div class="alignment-examples">
              <strong>Examples:</strong> ${match.examples.join(', ')}
            </div>
            <div style="margin-top: 10px; font-size: 0.8rem; color: #00cc66;">
              ${match.type === 'both' ? '‚úì Both Government & Business' : 
                match.type === 'government' ? '‚úì Your Government Priority' : 
                '‚úì Your Business Priority'}
            </div>
          </div>
        `).join('')}
      </div>
    </div>
    ` : '<div class="alignment-section"><h3>üîç No Matching Practices</h3><p style="color: #888;">None of this service\'s practices match your preferences.</p></div>'}
    
    <!-- Mismatches Section -->
    ${alignmentDetails.mismatches.length > 0 ? `
    <div class="alignment-section">
      <h3>‚ö†Ô∏è Practices That Don't Match Your Preferences</h3>
      <div class="alignment-grid">
        ${alignmentDetails.mismatches.map(mismatch => `
          <div class="alignment-item mismatches">
            <div class="alignment-header">
              <div class="alignment-icon">‚úó</div>
              <h4>${mismatch.title}</h4>
            </div>
            <div class="alignment-description">${mismatch.description}</div>
            <div class="alignment-examples">
              <strong>Examples:</strong> ${mismatch.examples.join(', ')}
            </div>
            <div style="margin-top: 10px; font-size: 0.8rem; color: #ff4444;">
              ${mismatch.type === 'government' ? '‚úó Not in your Government priorities' : 
                '‚úó Not in your Business priorities'}
            </div>
          </div>
        `).join('')}
      </div>
    </div>
    ` : ''}
  `;
  
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeServiceAnalysis() {
  const modal = document.getElementById('serviceAnalysisModal');
  const content = document.getElementById('serviceAnalysisContent');
  
  modal.style.background = 'rgba(0, 0, 0, 0)';
  content.style.transform = 'scale(0.9) translateY(20px)';
  content.style.opacity = '0';
  
  setTimeout(() => {
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
    
    modal.style.background = '';
    content.style.transform = '';
    content.style.opacity = '';
  }, 300);
}

function displayServicesAnalysis(services, gridId, govPriorities, businessPriorities, sectionTitle) {  
  const grid = document.getElementById(gridId);  
  if (!grid) {
    return;
  }
  
  grid.innerHTML = '';
  
  if (services.length === 0) {
    const emptyDiv = document.createElement('div');
    emptyDiv.className = 'service-card';
    emptyDiv.style.gridColumn = '1 / -1';
    emptyDiv.style.textAlign = 'center';
    emptyDiv.style.padding = '40px';
    emptyDiv.innerHTML = `<p style="color: #ccc;">No ${sectionTitle.toLowerCase()}</p>`;
    grid.appendChild(emptyDiv);
    return;
  }
  
  const sectionElement = document.getElementById(gridId.replace('Grid', 'Section'));
  if (sectionElement) {
    const h3 = sectionElement.querySelector('h3');
    if (h3) {
      h3.textContent = `${sectionTitle} (${services.length})`;
    }
  }
  
  services.forEach((service, index) => {    
    const serviceData = companyData.find(c => c.id === service.id) || service;
    let alignment = 'neutral';
    let alignmentText = 'Neutral Surveillance';
    
    if (serviceData.surveillanceType === 'government') {
      alignment = govPriorities.length > 0 ? 'gov-aligned' : 'neutral';
      alignmentText = 'Government-Aligned';
    } else if (serviceData.surveillanceType === 'business') {
      alignment = businessPriorities.length > 0 ? 'business-aligned' : 'neutral';
      alignmentText = 'Business-Aligned';
    } else if (serviceData.surveillanceType === 'both') {
      alignment = 'conflicted';
      alignmentText = 'Dual-Purpose Surveillance';
    }
    
    const govPracticeCount = serviceData.surveillancePractices?.filter(practice => {
      const govItem = surveillanceData.government.find(g => g.id === practice);
      return govItem && govPriorities.some(gp => gp.id === govItem.id);
    }).length || 0;
    
    const businessPracticeCount = serviceData.surveillancePractices?.filter(practice => {
      const businessItem = surveillanceData.business.find(b => b.id === practice);
      return businessItem && businessPriorities.some(bp => bp.id === businessItem.id);
    }).length || 0;
    
    const totalGovPracticesInService = serviceData.surveillancePractices?.filter(practice => 
      surveillanceData.government.some(g => g.id === practice)
    ).length || 0;
    
    const totalBusinessPracticesInService = serviceData.surveillancePractices?.filter(practice => 
      surveillanceData.business.some(b => b.id === practice)
    ).length || 0;
        
    let govMatchPercentage = 0;
    if (totalGovPracticesInService === 0) {
      govMatchPercentage = 100;
    } else {
      govMatchPercentage = Math.round((govPracticeCount / totalGovPracticesInService) * 100);
    }
    
    let businessMatchPercentage = 0;
    if (totalBusinessPracticesInService === 0) {
      businessMatchPercentage = 100;
    } else {
      businessMatchPercentage = Math.round((businessPracticeCount / totalBusinessPracticesInService) * 100);
    }
    
    let matchPercentage = Math.round((govMatchPercentage + businessMatchPercentage) / 2);
    
    const serviceEl = document.createElement('div');
    serviceEl.className = 'service-card';
    serviceEl.dataset.serviceId = serviceData.id;
    
    serviceEl.innerHTML = `
    <div class="service-match-badge ${matchPercentage >= 70 ? 'high-match' : matchPercentage >= 40 ? 'medium-match' : 'low-match'}">
      ${matchPercentage}%
    </div>
    <div class="service-header">
      <img class="service-logo" src="${companyLogos[serviceData.id] || ''}" alt="${serviceData.name}" onerror="this.style.display='none'">
      <div>
        <h3 class="service-name">${serviceData.name}</h3>
        <span class="service-category ${alignment}">${alignmentText}</span>
      </div>
    </div>
    <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 15px;">${serviceData.summary}</p>
    <div style="font-size: 0.85rem;">
      <p><strong>Surveillance Focus:</strong> ${serviceData.surveillanceType === 'both' ? 'Government & Business' : serviceData.surveillanceType}</p>
      <p><strong>Govt Priority Match:</strong> ${govPracticeCount}/${totalGovPracticesInService} (${govMatchPercentage}%)</p>
      <p><strong>Business Priority Match:</strong> ${businessPracticeCount}/${totalBusinessPracticesInService} (${businessMatchPercentage}%)</p>
      <p><strong>Overall Match:</strong> ${matchPercentage}%</p>
      <p><small style="color: #666;">${sectionTitle.toLowerCase()}</small></p>
    </div>
  `;
    
    serviceEl.addEventListener('click', () => {
      showServiceAnalysis(serviceData, govPriorities, businessPriorities);
    });
    
    grid.appendChild(serviceEl);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('enterPreferencesLink').addEventListener('click', (e) => {
    e.preventDefault();
    document.querySelector('.main-content').classList.add('hidden');
    setTimeout(() => {
      document.getElementById('dataPreferencesContainer').classList.add('active');
      initializeSurveillanceInterface();
    }, 500);
  });
  
  document.getElementById('nextToBusinessBtn').addEventListener('click', () => {
    generateSurveillanceItems('business', surveillanceData.business, 'businessGrid');
    const btn = document.getElementById('nextToBusinessBtn');
    btn.style.transform = 'scale(0.95)';
    setTimeout(() => {
      btn.style.transform = '';
    }, 200);
    
    showView('business');
  });
  
  document.getElementById('calculateBtn').addEventListener('click', () => {
  const btn = document.getElementById('calculateBtn');
  btn.style.transform = 'scale(0.95)';
  setTimeout(() => {
    btn.style.transform = '';
  }, 200);
  
  savePreferencesToLocalStorage();
  
  setTimeout(() => {
    showView('results');
  }, 100);
});
  
  document.getElementById('backToGovBtn').addEventListener('click', () => {
    const btn = document.getElementById('backToGovBtn');
    btn.style.transform = 'scale(0.95)';
    setTimeout(() => {
      btn.style.transform = '';
      showView('gov');
    }, 200);
  });
  
  document.getElementById('backFromResultsBtn').addEventListener('click', () => {
    const btn = document.getElementById('backFromResultsBtn');
    btn.style.transform = 'scale(0.95)';
    setTimeout(() => {
      btn.style.transform = '';
      showView('business');
    }, 200);
  });
  
  // next poem button
  document.getElementById('nextPoemBtn').addEventListener('click', () => {
    localStorage.setItem('surveillancePreferences', JSON.stringify(userSelections));
    
    const btn = document.getElementById('nextPoemBtn');
    const originalText = btn.innerHTML;
    btn.innerHTML = '‚è≥ Loading...';
    btn.disabled = true;
    
    setTimeout(() => {
      window.location.href = 'site4.html';
    }, 800);
  });
  
  document.getElementById('closeAnalysisBtn').addEventListener('click', closeServiceAnalysis);
  
  document.getElementById('serviceAnalysisModal').addEventListener('click', (e) => {
    if (e.target === document.getElementById('serviceAnalysisModal')) {
      closeServiceAnalysis();
    }
  });
  
  const serviceAnalysisContent = document.getElementById('serviceAnalysisContent');
  if (serviceAnalysisContent) {
    serviceAnalysisContent.addEventListener('click', (e) => {
      e.stopPropagation();
    });
  }
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      const modal = document.getElementById('serviceAnalysisModal');
      if (modal.classList.contains('active')) {
        closeServiceAnalysis();
      }
    }
  });
});

const pCanvas = document.getElementById('particleCanvas');
const pCtx = pCanvas.getContext('2d');
function resizeParticles(){ pCanvas.width=window.innerWidth; pCanvas.height=window.innerHeight; }
resizeParticles();
window.addEventListener('resize', resizeParticles);

class Particle {
  constructor(){ 
    this.x=Math.random()*pCanvas.width; 
    this.y=Math.random()*pCanvas.height; 
    this.size=Math.random()*1.5+0.5;
    const angle=Math.random()*Math.PI*2; 
    const speed=Math.random()*0.7+0.2;
    this.speedX=Math.cos(angle)*speed; 
    this.speedY=Math.sin(angle)*speed;
    this.alpha = Math.random()*0.5+0.3;
  }
  update(){ 
    this.x+=this.speedX; 
    this.y+=this.speedY;
    if(this.x>pCanvas.width) this.x=0; 
    if(this.x<0) this.x=pCanvas.width;
    if(this.y>pCanvas.height) this.y=0; 
    if(this.y<0) this.y=pCanvas.height;
  }
  draw(){ 
    pCtx.fillStyle=`rgba(255,255,255,${this.alpha})`; 
    pCtx.beginPath(); 
    pCtx.arc(this.x,this.y,this.size,0,Math.PI*2); 
    pCtx.fill(); 
  }
}
const particles=[];
for(let i=0;i<150;i++) particles.push(new Particle());
function animateParticles(){ 
  pCtx.clearRect(0,0,pCanvas.width,pCanvas.height); 
  particles.forEach(p=>{p.update();p.draw();}); 
  requestAnimationFrame(animateParticles);
}
animateParticles();

const wCanvas=document.getElementById('wordCanvas');
const wCtx=wCanvas.getContext('2d');
function resizeWords(){ wCanvas.width=window.innerWidth; wCanvas.height=window.innerHeight; }
resizeWords();
window.addEventListener('resize', resizeWords);

const WORDS=[
  "surveillance","government","business","monitoring","tracking","control",
  "data collection","privacy","security","profit","compliance","authority",
  "panopticon","watchlist","database","algorithm","prediction","manipulation",
  "transparency","accountability","regulation","exploitation","protection"
];

const pixelSize=6, revealDelay=10, holdMS=1000, fadeMS=3000, margin=150;
function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];}}

async function showWord(word){
    const off=document.createElement('canvas');
    const W=wCanvas.width*0.5, H=100; off.width=W; off.height=H;
    const octx=off.getContext('2d'); octx.font=`bold 80px 'Trebuchet MS', sans-serif`; octx.textAlign='center'; octx.textBaseline='middle'; octx.fillStyle='white'; octx.fillText(word,W/2,H/2);

    const img=octx.getImageData(0,0,W,H).data;
    const pixels=[];
    for(let y=0;y<H;y+=pixelSize){for(let x=0;x<W;x+=pixelSize){if(img[(y*W+x)*4+3]>128) pixels.push({x,y});}}
    shuffle(pixels);

    const side = Math.floor(Math.random() * 4);
    let randX = 0, randY = 0, rotation = 0;
    const margin = 10;

    switch(side){
    case 0: randX = margin + Math.random() * (wCanvas.width - margin - W); randY = margin; rotation = 0; break;
    case 1: randX = wCanvas.width - margin - W + 200; randY = margin + Math.random() * (wCanvas.height - 5*margin - H); rotation = 90; break;
    case 2: randX = margin + Math.random() * (wCanvas.width - margin - W); randY = wCanvas.height - margin - H; rotation = 0; break;
    case 3: randX = margin-270; randY = margin + Math.random() * (wCanvas.height - 5*margin - H); rotation = 90; break;
    }

    for(const p of pixels){
      let px=p.x, py=p.y;
      if(rotation===90){ const cx=randX+W/2; const cy=randY+H/2; px=cx+(p.y-H/2); py=cy-(p.x-W/2);}
      else {px+=randX; py+=randY;}
      wCtx.fillStyle='white'; wCtx.fillRect(px,py,pixelSize,pixelSize);
      await sleep(revealDelay);
    }

    await sleep(holdMS);

    const frames=Math.floor(fadeMS/16);
    for(let f=0;f<frames;f++){
      wCtx.clearRect(0,0,wCanvas.width,wCanvas.height);
      wCtx.globalAlpha=1-f/frames;
      for(const p of pixels){
        let px=p.x, py=p.y;
        if(rotation===90){ const cx=randX+W/2; const cy=randY+H/2; px=cx+(p.y-H/2); py=cy-(p.x-W/2);}
        else {px+=randX; py+=randY;}
        wCtx.fillRect(px,py,pixelSize,pixelSize);
      }
      await sleep(16);
    }
    wCtx.globalAlpha = 1;
}

async function fadeInWords(){
    for(let alpha=0; alpha<=1; alpha+=0.02){
        wCtx.globalAlpha = alpha;
        await sleep(16);
    }
    wCtx.globalAlpha = 1;
}

async function loopWords() {
    while(true){
        const randomIndex = Math.floor(Math.random() * WORDS.length);
        const word = WORDS[randomIndex];
        await showWord(word);
    }
}

window.addEventListener('load', () => {
    fadeInWords();
    loopWords();
});
</script>
</body>
</html>
